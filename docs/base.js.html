<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/base.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: core/base.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*! base.js */

var utils = require('./utils');

function inherit(parent) {

  /** KagoDB class constructor.
   * @class KagoDB
   * @param {Object} options - option parameters for the instance
   * @returns {KagoDB} an instance
   * @example
   * var collection = new KagoDB(options);
   * var collection2 = KagoDB(options); // same as above
   */

  // note that the below doesn't call super classes' constructors.

  function child(options) {
    if (!(this instanceof child)) return new child(options);
    this.set(child.options);
    this.set(options);
  }

  utils.inherits(child, parent);

  child.options = copy(parent.options);

  /** This loads a mixin class which will export instance methods.
   * @method KagoDB.mixin
   * @param {Function} mixin - mixin class which has exporter() class method
   * @returns this class itself for method chaining
   * @example
   * var MyMixin = require('mymixin');
   * var KagoDB = require('kagodb');
   * var MyKago = KagoDB.inherit();
   * MyKago.use(MyMixin);
   * var collection = new MyKago();
   */
  child.mixin = function(mixin) {
    mixin.call(child.prototype);
    return child;
  };

  /** This builds an instance as same as new KagoDB(). It would be good for method chaining.
   * @method KagoDB.build
   * @param {Object} options - option parameters
   * @returns {KagoDB} an instance
   * @example
   * var collection = KagoDB.build(options);
   */
  child.build = function(options) {
    return new child(options);
  };

  /** This generates a sub class which inherits KagoDB class or its descendant.
   * @method KagoDB.inherit
   * @returns a sub class
   * @example
   * var MyKago = KagoDB.inherit();
   * var collection = new MyKago();
   */
  child.inherit = function() {
    return inherit(child);
  };

  /** This gets a default parameter value for the class.
   * @method KagoDB.get
   * @param {String} key - parameter name
   * @returns parameter value
   * @example
   * var path = KagoDB.get('path');
   */
  child.get = function(key) {
    var opts = child.options || (child.options = {});
    return opts[key];
  };

  /** This sets a default parameter value for the class.
   * @method KagoDB.set
   * @param {String|Object} key - parameter name or a parameters object
   * @param {any} [val] - new value
   * @returns this class itself for method chaining
   * @example
   * KagoDB.set('path', 'data');
   * KagoDB.set({'storage': 'yaml'});
   */
  child.set = function(key, val) {
    var opts = child.options || (child.options = {});
    opts[key] = val;
    return child;
  };

  return child;
}

function copy(parent) {
  var object = {};
  for (var key in parent) {
    object[key] = parent[key];
  }
  return object;
}

function KagoDB() {}

/** This gets a parameter value for the instance parameters.
 * @method KagoDB.prototype.get
 * @param {String} key - parameter name
 * @returns parameter value
 * @example
 * var collection = new KagoDB({path: 'data'});
 * var path = collection.get('path');
 */
KagoDB.prototype.get = function(key) {
  var opts = this.options || (this.options = {});
  return opts[key];
};

/** This sets a parameter value for the instance parameters.
 * @method KagoDB.prototype.set
 * @param {String|Object} keys - parameter name or a parameters object
 * @param {any} [val] - new parameter value
 * @returns this instance itself for method chaining
 * @example
 * var collection = new KagoDB();
 * collection.set('path', 'data');
 * collection.set({'storage': 'yaml'});
 */
KagoDB.prototype.set = function(key, val) {
  var opts = this.options || (this.options = {});
  var len = arguments.length;
  if (len == 2 && key) {
    opts[key] = val;
  } else if (len == 1 && key) {
    var args = key;
    for (key in args) {
      opts[key] = args[key];
    }
  }
  return this;
};

module.exports = inherit(KagoDB);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Cursor.html">Cursor</a></li><li><a href="KagoDB.html">KagoDB</a></li><li><a href="Utils.html">Utils</a></li></ul><h3>Mixins</h3><ul><li><a href="ConditionMixin.html">ConditionMixin</a></li><li><a href="FindMixin.html">FindMixin</a></li><li><a href="StorageMixin.html">StorageMixin</a></li><li><a href="WebapiMixin.html">WebapiMixin</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sat Jun 01 2013 00:08:20 GMT+0900 (JST)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
