<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/base.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: core/base.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*! base.js */

var utils = require('./utils');

function inherit(parent) {

  /**
   * KagoDB class constructor.
   *
   * @class KagoDB
   * @param {Object} options - option parameters for the instance
   * @returns {KagoDB} an instance
   * @example
   * var collection = new KagoDB(options);
   *
   * var collection2 = KagoDB(options); // same as above
   */

  // note that the below doesn't call super classes' constructors.

  function child(options) {
    if (!(this instanceof child)) return new child(options);
    this.set(child.settings);
    this.set(options);
  }

  utils.inherits(child, parent);

  child.settings = utils.clone(parent.settings);

  /**
   * This is a shortcut to access modules bundled.
   *
   * @member {Object} KagoDB.bundle
   * @example
   * var utils = KagoDB.bundle.utils;
   */

  /** This is a shortcut to access modules bundled.
   * @member {Object} KagoDB.prototype.bundle
   * @example
   * var collection = new KagoDB(opts);
   *
   * var utils = collection.bundle.utils;
   */

  child.prototype.bundle = child.bundle = utils.clone(parent.bundle || {});

  /**
   * This applies a mixin object which exports instance methods.
   *
   * @method KagoDB.mixin
   * @param {Object|Function} mixin - mixin object or mixin function which returns mixin object
   * @returns this class itself for method chaining
   * @example
   * var MyKago = KagoDB.inherit();
   *
   * var MyMixin = {
   *   mymethod: function() {}
   * };
   * MyKago.use(MyMixin);
   *
   * var collection = new MyKago();
   */
  child.mixin = function(mixin) {
    _mixin(child.prototype, mixin);
    return child;
  };

  /**
   * This generates a sub class which inherits KagoDB class or its descendant.
   *
   * @method KagoDB.inherit
   * @param {Object} options - default option parameters for the child class
   * @returns a sub class
   * @example
   * var MyKago = KagoDB.inherit();
   *
   * MyKago.mixin(somemixin()); // load some mixin
   * MyKago.set('foo', 'bar');  // define default value
   *
   * var collection = new MyKago();
   */
  child.inherit = function() {
    var grandchild = inherit(child);
    if (arguments.length) {
      grandchild.set.apply(grandchild, arguments);
    }
    return grandchild;
  };

  /**
   * This gets a default parameter value for the class.
   *
   * @method KagoDB.get
   * @param {String} key - parameter name
   * @returns parameter value
   * @example
   * var MyKago = KagoDB.inherit();
   *
   * MyKago.set('foo', 'bar');
   * var foo1 = MyKago.get('foo'); // => bar
   *
   * var collection = new MyKago();
   * var foo2 = collection.get('foo'); // => bar
   */
  child.get = function(key) {
    var opts = child.settings || (child.settings = {});
    return opts[key];
  };

  /**
   * This sets a default parameter value for the class.
   *
   * @method KagoDB.set
   * @param {String|Object} key - parameter name or a parameters object
   * @param {any} [val] - new value
   * @returns this class itself for method chaining
   * @example
   * var MyKago = KagoDB.inherit();
   *
   * MyKago.set('path', 'data');
   * MyKago.set({'storage': 'yaml'});
   */
  child.set = function(key, val) {
    var opts = child.settings || (child.settings = {});
    var len = arguments.length;
    if (len == 2 && key) {
      opts[key] = val;
    } else if (len == 1 && 'object' == typeof key) {
      var args = key;
      for (key in args) {
        opts[key] = args[key];
      }
    } else if (len > 1 || 'undefined' != typeof key) {
      throw new Error('invalid set(' + key + ', ' + val + ')');
    }
    return child;
  };

  return child;
}

function KagoDB() {}

/**
 * This gets a parameter value for the instance parameters.
 *
 * @method KagoDB.prototype.get
 * @param {String} key - parameter name
 * @returns parameter value
 * @example
 * var collection = new KagoDB({path: 'data'});
 *
 * var path = collection.get('path');
 */
KagoDB.prototype.get = function(key) {
  var opts = this.settings || (this.settings = {});
  return opts[key];
};

/**
 * This sets a parameter value for the instance parameters.
 *
 * @method KagoDB.prototype.set
 * @param {String|Object} key - parameter name or a parameters object
 * @param {any} [val] - new parameter value
 * @returns {KagoDB} this instance itself for method chaining
 * @example
 * var collection = new KagoDB();
 *
 * collection.set('path', 'data');
 * collection.set({'storage': 'yaml'});
 */
KagoDB.prototype.set = function(key, val) {
  var opts = this.settings || (this.settings = {});
  var len = arguments.length;
  if (len == 2 && key) {
    opts[key] = val;
  } else if (len == 1 && 'object' == typeof key) {
    var args = key;
    for (key in args) {
      opts[key] = args[key];
    }
  } else if (len > 1 || 'undefined' != typeof key) {
    throw new Error('invalid set(' + key + ', ' + val + ')');
  }
  return this;
};

KagoDB.prototype.mixin = function(mixin) {
  _mixin(this, mixin);
  return this;
};

function _mixin(target, mixin) {
  if ('function' == typeof mixin) {
    mixin = mixin.call(target);
    if (mixin) {
      _mixin(target, mixin);
    }
  } else if ('object' == typeof mixin) {
    for (var key in mixin) {
      target[key] = mixin[key];
    }
  } else {
    throw new Error('invalid mixin(' + mixin + ')');
  }
}

module.exports = inherit(KagoDB);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-system.html">system</a></li><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="Cursor.html">Cursor</a></li><li><a href="KagoDB.html">KagoDB</a></li><li><a href="ObjectID.html">ObjectID</a></li><li><a href="WebMethods.html">WebMethods</a></li></ul><h3>Mixins</h3><ul><li><a href="ajax.html">ajax</a></li><li><a href="count.html">count</a></li><li><a href="deny.html">deny</a></li><li><a href="dynamic_ajax.html">dynamic_ajax</a></li><li><a href="dynamic_mixin.html">dynamic_mixin</a></li><li><a href="dynamic_storage.html">dynamic_storage</a></li><li><a href="events.html">events</a></li><li><a href="find.html">find</a></li><li><a href="find_one.html">find_one</a></li><li><a href="findAndModify.html">findAndModify</a></li><li><a href="init.html">init</a></li><li><a href="insert.html">insert</a></li><li><a href="intercept_mixin.html">intercept_mixin</a></li><li><a href="jquery.html">jquery</a></li><li><a href="json.html">json</a></li><li><a href="local_storage.html">local_storage</a></li><li><a href="memory.html">memory</a></li><li><a href="model.html">model</a></li><li><a href="noop.html">noop</a></li><li><a href="obop.html">obop</a></li><li><a href="pkey.html">pkey</a></li><li><a href="remove.html">remove</a></li><li><a href="request.html">request</a></li><li><a href="stub.html">stub</a></li><li><a href="superagent.html">superagent</a></li><li><a href="update.html">update</a></li><li><a href="webapi.html">webapi</a></li><li><a href="yaml.html">yaml</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a>
</footer>

<script> prettyPrint(); </script>
</body>
</html>
